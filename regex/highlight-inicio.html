<!DOCTYPE html>
<html>
    <head>
        <title>Curso Javascript Completo</title>
        <meta charset="utf-8" />

        <style>
            .hgt {
                font-weight: normal;
                color: white;
                background-color: rgb(99, 0, 0);
            }
        </style>
    </head>

    <body>
        <h1>Curso Javascript Completo</h1>

        <input type="text" name="" />
        <p>
            1 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et
            dolore magna aliqua. <b>Ut enim ad minim veniam</b>, quis nostrud exercitation ullamco laboris nisi ut
            aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum
            dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia
            deserunt mollit anim id est laborum.
        </p>
        <p>
            2 Lorem ipsum, dolor sit amet consectetur adipisicing elit. Omnis quis qui, numquam eius porro corrupti
            laborum delectus perspiciatis repudiandae ullam.
        </p>
        <p>3 Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis, quas?</p>
    </body>

    <script>
        // document.querySelector("input").addEventListener("input", function () {
        //     const regex = new RegExp(this.value, "gi");
        //     [...document.querySelectorAll("p")].forEach(function (p) {
        //         let strP = p.innerText;

        //         let newHTMLP = strP.replaceAll(regex, function (valueStr) {
        //             return `<span class="hgt">${valueStr}</span>`;
        //         });
        //         p.innerHTML = newHTMLP;
        //     });
        // });

        const originHTMLPs = [...document.querySelectorAll("p")].map((p) => p.innerHTML);

        document.querySelector("input").addEventListener("input", function () {
            const regex = new RegExp(this.value, "gi");
            const valueInput = this.value;
            [...document.querySelectorAll("p")].forEach(function (p, i) {
                let htmlP = originHTMLPs[i];

                // htmlP = htmlP.replaceAll(/<span class="hgt">|<\/span>/g, () => "");
                if (valueInput) {
                    let newHTMLP = htmlP.replaceAll(regex, function (valueStr) {
                        return `<span class="hgt">${valueStr}</span>`;
                    });

                    p.innerHTML = newHTMLP;
                } else {
                    p.innerHTML = htmlP;
                }
            });
        });
    </script>
</html>
